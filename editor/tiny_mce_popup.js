var tinyMCE=null,tinyMCELang=null;function TinyMCE_Popup(){}TinyMCE_Popup.prototype={findWin:function(A){var B;B=A;while(B&&(B=B.parent)!=null){if(typeof (B.tinyMCE)!="undefined"){return B}}B=A;while(B&&(B=B.opener)!=null){if(typeof (B.tinyMCE)!="undefined"){return B}}if(typeof (top.tinyMCE)!="undefined"){return top}return null},init:function(){var C=window.opener?window.opener:window.dialogArguments,F;var B,A,D,E;if(!C){C=this.findWin(window)}if(!C){alert("tinyMCE object reference not found from popup.");return }window.opener=C;this.windowOpener=C;this.onLoadEval="";tinyMCE=C.tinyMCE;tinyMCELang=C.tinyMCELang;B=tinyMCE.selectedInstance;this.isWindow=tinyMCE.getWindowArg("mce_inside_iframe",false)==false;this.storeSelection=(tinyMCE.isRealIE)&&!this.isWindow&&tinyMCE.getWindowArg("mce_store_selection",true);if(this.isWindow){window.focus()}if(this.storeSelection){B.selectionBookmark=B.selection.getBookmark(true)}if(tinyMCELang.lang_dir){document.dir=tinyMCELang.lang_dir}A=new RegExp("{|\\$|}","g");D=document.title.replace(A,"");if(typeof (tinyMCELang[D])!="undefined"){E=document.createElement("div");E.innerHTML=tinyMCELang[D];document.title=E.innerHTML;if(typeof (tinyMCE.setWindowTitle)!="undefined"){tinyMCE.setWindowTitle(window,E.innerHTML)}}document.write('<link href="'+tinyMCE.getParam("popups_css")+'" rel="stylesheet" type="text/css">');if(tinyMCE.getParam("popups_css_add")){F=tinyMCE.getParam("popups_css_add");if(F.indexOf("://")==-1&&F.charAt(0)!="/"){F=tinyMCE.documentBasePath+"/"+F}document.write('<link href="'+F+'" rel="stylesheet" type="text/css">')}tinyMCE.addEvent(window,"load",this.onLoad)},onLoad:function(){var dir,i,elms,body=document.body;if(tinyMCE.getWindowArg("mce_replacevariables",true)){body.innerHTML=tinyMCE.applyTemplate(body.innerHTML,tinyMCE.windowArgs)}dir=tinyMCE.selectedInstance.settings.directionality;if(dir=="rtl"&&document.forms&&document.forms.length>0){elms=document.forms[0].elements;for(i=0;i<elms.length;i++){if((elms[i].type=="text"||elms[i].type=="textarea")&&elms[i].getAttribute("dir")!="ltr"){elms[i].dir=dir}}}if(body.style.display=="none"){body.style.display="block"}if(tinyMCEPopup.onLoadEval!==""){eval(tinyMCEPopup.onLoadEval)}},executeOnLoad:function(str){if(tinyMCE.isOpera){this.onLoadEval=str}else{eval(str)}},resizeToInnerSize:function(){var E,G,F,D,B,C,A,I,H;if(this.isWindow&&tinyMCE.isNS71){window.resizeBy(0,10);return }if(this.isWindow){G=document;F=G.body;if(F.style.display=="none"){F.style.display="block"}D=F.style.margin;F.style.margin="0";B=G.createElement("div");B.id="mcBodyWrapper";B.style.display="none";B.style.margin="0";A=G.body.childNodes;for(E=A.length-1;E>=0;E--){if(B.hasChildNodes()){B.insertBefore(A[E].cloneNode(true),B.firstChild)}else{B.appendChild(A[E].cloneNode(true))}A[E].parentNode.removeChild(A[E])}G.body.appendChild(B);C=document.createElement("iframe");C.id="mcWinIframe";C.src=document.location.href.toLowerCase().indexOf("https")==-1?"about:blank":tinyMCE.settings.default_document;C.width="100%";C.height="100%";C.style.margin="0";G.body.appendChild(C);C=document.getElementById("mcWinIframe");I=tinyMCE.getWindowArg("mce_width")-C.clientWidth;H=tinyMCE.getWindowArg("mce_height")-C.clientHeight;window.resizeBy(I,H);F.style.margin=D;C.style.display="none";B.style.display="block"}},resizeToContent:function(){var I=(navigator.appName=="Microsoft Internet Explorer");var A=(navigator.userAgent.indexOf("Opera")!=-1);var D,B,G,F,E,J,H;if(A){return }if(I){try{window.resizeTo(10,10)}catch(C){}D=document.body;B=D.offsetWidth;G=D.offsetHeight;J=(D.scrollWidth-B)+4;H=D.scrollHeight-G;try{window.resizeBy(J,H)}catch(C){}}else{window.scrollBy(1000,1000);if(window.scrollX>0||window.scrollY>0){window.resizeBy(window.innerWidth*2,window.innerHeight*2);window.sizeToContent();window.scrollTo(0,0);F=parseInt(screen.width/2)-(window.outerWidth/2);E=parseInt(screen.height/2)-(window.outerHeight/2);window.moveTo(F,E)}}},getWindowArg:function(B,A){return tinyMCE.getWindowArg(B,A)},restoreSelection:function(){var A;if(this.storeSelection){A=tinyMCE.selectedInstance;A.getWin().focus();if(A.selectionBookmark){A.selection.moveToBookmark(A.selectionBookmark)}}},execCommand:function(C,D,B){var A=tinyMCE.selectedInstance;this.restoreSelection();A.execCommand(C,D,B);if(this.storeSelection){A.selectionBookmark=A.selection.getBookmark(true)}},close:function(){tinyMCE.closeWindow(window)},pickColor:function(B,A){tinyMCE.selectedInstance.execCommand("mceColorPicker",true,{element_id:A,document:document,window:window,store_selection:false})},openBrowser:function(element_id,type,option){var cb=tinyMCE.getParam(option,tinyMCE.getParam("file_browser_callback"));var url=document.getElementById(element_id).value;tinyMCE.setWindowArg("window",window);tinyMCE.setWindowArg("document",document);if(eval("typeof(tinyMCEPopup.windowOpener."+cb+")")=="undefined"){alert("Callback function: "+cb+" could not be found.")}else{eval("tinyMCEPopup.windowOpener."+cb+"(element_id, url, type, window);")}},importClass:function(B){var A;window[B]=function(){};for(A in window.opener[B].prototype){window[B].prototype[A]=window.opener[B].prototype[A]}window[B].constructor=window.opener[B].constructor}};var tinyMCEPopup=new TinyMCE_Popup();tinyMCEPopup.init();